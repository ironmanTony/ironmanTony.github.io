
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>ironmantony</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description">
<meta property="og:type" content="website">
<meta property="og:title" content="ironmantony">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="ironmantony">
<meta property="og:description">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="ironmantony">
<meta name="twitter:description">
  
    <link rel="alternative" href="/atom.xml" title="ironmantony" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  <!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->
  
</head>
<body>
<div id="container">
  <div id="wrap">
    <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">ironmantony</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">不要想着远处的路有多远，要知道你是在走一小步，你能办到的！</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="http://www.baidu.com/baidu" method="get" accept-charset="utf-8" class="search-form">
          <input type="search" name="word" maxlength="20" class="search-form-input" placeholder="Search">
          <input type="submit" value="" class="search-form-submit">
          <input name=tn type=hidden value="bds">
          <input name=cl type=hidden value="3">
          <input name=ct type=hidden value="2097152">
          <input type="hidden" name="si" value="yoursite.com">
        </form>
      </div>
    </div>
  </div>
</header>
    <div class="outer">
      <section id="main">
  
    <article id="post-java线程池和对象池" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/10/03/java线程池和对象池/" class="article-date">
  <time datetime="2015-10-03T11:11:21.000Z" itemprop="datePublished">2015-10-03</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/10/03/java线程池和对象池/">java线程池和对象池</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id="java线程池">java线程池</h1><p>原文链接：（讲的比较详细）<br><a href="http://www.infoq.com/cn/articles/java-threadPool#anch97718" target="_blank" rel="external">http://www.infoq.com/cn/articles/java-threadPool#anch97718</a></p>
<h2 id="线程池的创建">线程池的创建</h2><p>我们可以通过ThreadPoolExecutor来创建一个线程池。<br><figure class="highlight"><figcaption><span>ThreadPoolExecutor(corePoolSize, maximumPoolSize, keepAliveTime, milliseconds,runnableTaskQueue, handler);```</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#10;### &#21019;&#24314;&#19968;&#20010;&#32447;&#31243;&#27744;&#38656;&#35201;&#36755;&#20837;&#20960;&#20010;&#21442;&#25968;&#65306;&#10;- corePoolSize&#65288;&#32447;&#31243;&#27744;&#30340;&#22522;&#26412;&#22823;&#23567;&#65289;&#65306;&#24403;&#25552;&#20132;&#19968;&#20010;&#20219;&#21153;&#21040;&#32447;&#31243;&#27744;&#26102;&#65292;&#32447;&#31243;&#27744;&#20250;&#21019;&#24314;&#19968;&#20010;&#32447;&#31243;&#26469;&#25191;&#34892;&#20219;&#21153;&#65292;&#21363;&#20351;&#20854;&#20182;&#31354;&#38386;&#30340;&#22522;&#26412;&#32447;&#31243;&#33021;&#22815;&#25191;&#34892;&#26032;&#20219;&#21153;&#20063;&#20250;&#21019;&#24314;&#32447;&#31243;&#65292;&#31561;&#21040;&#38656;&#35201;&#25191;&#34892;&#30340;&#20219;&#21153;&#25968;&#22823;&#20110;&#32447;&#31243;&#27744;&#22522;&#26412;&#22823;&#23567;&#26102;&#23601;&#19981;&#20877;&#21019;&#24314;&#12290;&#22914;&#26524;&#35843;&#29992;&#20102;&#32447;&#31243;&#27744;&#30340;prestartAllCoreThreads&#26041;&#27861;&#65292;&#32447;&#31243;&#27744;&#20250;&#25552;&#21069;&#21019;&#24314;&#24182;&#21551;&#21160;&#25152;&#26377;&#22522;&#26412;&#32447;&#31243;&#12290;&#10;- runnableTaskQueue&#65288;&#20219;&#21153;&#38431;&#21015;&#65289;&#65306;&#29992;&#20110;&#20445;&#23384;&#31561;&#24453;&#25191;&#34892;&#30340;&#20219;&#21153;&#30340;&#38459;&#22622;&#38431;&#21015;&#12290; &#21487;&#20197;&#36873;&#25321;&#20197;&#19979;&#20960;&#20010;&#38459;&#22622;&#38431;&#21015;&#12290;&#10;&#9;- ArrayBlockingQueue&#65306;&#26159;&#19968;&#20010;&#22522;&#20110;&#25968;&#32452;&#32467;&#26500;&#30340;&#26377;&#30028;&#38459;&#22622;&#38431;&#21015;&#65292;&#27492;&#38431;&#21015;&#25353; FIFO&#65288;&#20808;&#36827;&#20808;&#20986;&#65289;&#21407;&#21017;&#23545;&#20803;&#32032;&#36827;&#34892;&#25490;&#24207;&#12290;&#10;&#9;- LinkedBlockingQueue&#65306;&#19968;&#20010;&#22522;&#20110;&#38142;&#34920;&#32467;&#26500;&#30340;&#38459;&#22622;&#38431;&#21015;&#65292;&#27492;&#38431;&#21015;&#25353;FIFO &#65288;&#20808;&#36827;&#20808;&#20986;&#65289; &#25490;&#24207;&#20803;&#32032;&#65292;&#21534;&#21520;&#37327;&#36890;&#24120;&#35201;&#39640;&#20110;ArrayBlockingQueue&#12290;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;Executors.newFixedThreadPool()&#20351;&#29992;&#20102;&#36825;&#20010;&#38431;&#21015;&#12290;&#10;&#9;- SynchronousQueue&#65306;&#19968;&#20010;&#19981;&#23384;&#20648;&#20803;&#32032;&#30340;&#38459;&#22622;&#38431;&#21015;&#12290;&#27599;&#20010;&#25554;&#20837;&#25805;&#20316;&#24517;&#39035;&#31561;&#21040;&#21478;&#19968;&#20010;&#32447;&#31243;&#35843;&#29992;&#31227;&#38500;&#25805;&#20316;&#65292;&#21542;&#21017;&#25554;&#20837;&#25805;&#20316;&#19968;&#30452;&#22788;&#20110;&#38459;&#22622;&#29366;&#24577;&#65292;&#21534;&#21520;&#37327;&#36890;&#24120;&#35201;&#39640;&#20110;LinkedBlockingQueue&#65292;&#38745;&#24577;&#24037;&#21378;&#26041;&#27861;Executors.newCachedThreadPool&#20351;&#29992;&#20102;&#36825;&#20010;&#38431;&#21015;&#12290;&#10;&#9;- PriorityBlockingQueue&#65306;&#19968;&#20010;&#20855;&#26377;&#20248;&#20808;&#32423;&#30340;&#26080;&#38480;&#38459;&#22622;&#38431;&#21015;&#12290;&#10;&#10;- maximumPoolSize&#65288;&#32447;&#31243;&#27744;&#26368;&#22823;&#22823;&#23567;&#65289;&#65306;&#32447;&#31243;&#27744;&#20801;&#35768;&#21019;&#24314;&#30340;&#26368;&#22823;&#32447;&#31243;&#25968;&#12290;&#22914;&#26524;&#38431;&#21015;&#28385;&#20102;&#65292;&#24182;&#19988;&#24050;&#21019;&#24314;&#30340;&#32447;&#31243;&#25968;&#23567;&#20110;&#26368;&#22823;&#32447;&#31243;&#25968;&#65292;&#21017;&#32447;&#31243;&#27744;&#20250;&#20877;&#21019;&#24314;&#26032;&#30340;&#32447;&#31243;&#25191;&#34892;&#20219;&#21153;&#12290;&#20540;&#24471;&#27880;&#24847;&#30340;&#26159;&#22914;&#26524;&#20351;&#29992;&#20102;&#26080;&#30028;&#30340;&#20219;&#21153;&#38431;&#21015;&#36825;&#20010;&#21442;&#25968;&#23601;&#27809;&#20160;&#20040;&#25928;&#26524;&#12290;&#10;- ThreadFactory&#65306;&#29992;&#20110;&#35774;&#32622;&#21019;&#24314;&#32447;&#31243;&#30340;&#24037;&#21378;&#65292;&#21487;&#20197;&#36890;&#36807;&#32447;&#31243;&#24037;&#21378;&#32473;&#27599;&#20010;&#21019;&#24314;&#20986;&#26469;&#30340;&#32447;&#31243;&#35774;&#32622;&#26356;&#26377;&#24847;&#20041;&#30340;&#21517;&#23383;&#12290;&#10;- RejectedExecutionHandler&#65288;&#39281;&#21644;&#31574;&#30053;&#65289;&#65306;&#24403;&#38431;&#21015;&#21644;&#32447;&#31243;&#27744;&#37117;&#28385;&#20102;&#65292;&#35828;&#26126;&#32447;&#31243;&#27744;&#22788;&#20110;&#39281;&#21644;&#29366;&#24577;&#65292;&#37027;&#20040;&#24517;&#39035;&#37319;&#21462;&#19968;&#31181;&#31574;&#30053;&#22788;&#29702;&#25552;&#20132;&#30340;&#26032;&#20219;&#21153;&#12290;&#36825;&#20010;&#31574;&#30053;&#40664;&#35748;&#24773;&#20917;&#19979;&#26159;AbortPolicy&#65292;&#34920;&#31034;&#26080;&#27861;&#22788;&#29702;&#26032;&#20219;&#21153;&#26102;&#25243;&#20986;&#24322;&#24120;&#12290;&#20197;&#19979;&#26159;JDK1.5&#25552;&#20379;&#30340;&#22235;&#31181;&#31574;&#30053;&#12290;&#10;&#9;- AbortPolicy&#65306;&#30452;&#25509;&#25243;&#20986;&#24322;&#24120;&#12290;&#10;&#9;- CallerRunsPolicy&#65306;&#21482;&#29992;&#35843;&#29992;&#32773;&#25152;&#22312;&#32447;&#31243;&#26469;&#36816;&#34892;&#20219;&#21153;&#12290;&#10;&#9;- DiscardOldestPolicy&#65306;&#20002;&#24323;&#38431;&#21015;&#37324;&#26368;&#36817;&#30340;&#19968;&#20010;&#20219;&#21153;&#65292;&#24182;&#25191;&#34892;&#24403;&#21069;&#20219;&#21153;&#12290;&#10;&#9;- DiscardPolicy&#65306;&#19981;&#22788;&#29702;&#65292;&#20002;&#24323;&#25481;&#12290;&#10;&#9;- &#24403;&#28982;&#20063;&#21487;&#20197;&#26681;&#25454;&#24212;&#29992;&#22330;&#26223;&#38656;&#35201;&#26469;&#23454;&#29616;RejectedExecutionHandler&#25509;&#21475;&#33258;&#23450;&#20041;&#31574;&#30053;&#12290;&#22914;&#35760;&#24405;&#26085;&#24535;&#25110;&#25345;&#20037;&#21270;&#19981;&#33021;&#22788;&#29702;&#30340;&#20219;&#21153;&#12290;&#10;&#10;- keepAliveTime&#65288;&#32447;&#31243;&#27963;&#21160;&#20445;&#25345;&#26102;&#38388;&#65289;&#65306;&#32447;&#31243;&#27744;&#30340;&#24037;&#20316;&#32447;&#31243;&#31354;&#38386;&#21518;&#65292;&#20445;&#25345;&#23384;&#27963;&#30340;&#26102;&#38388;&#12290;&#25152;&#20197;&#22914;&#26524;&#20219;&#21153;&#24456;&#22810;&#65292;&#24182;&#19988;&#27599;&#20010;&#20219;&#21153;&#25191;&#34892;&#30340;&#26102;&#38388;&#27604;&#36739;&#30701;&#65292;&#21487;&#20197;&#35843;&#22823;&#36825;&#20010;&#26102;&#38388;&#65292;&#25552;&#39640;&#32447;&#31243;&#30340;&#21033;&#29992;&#29575;&#12290;&#10;- TimeUnit&#65288;&#32447;&#31243;&#27963;&#21160;&#20445;&#25345;&#26102;&#38388;&#30340;&#21333;&#20301;&#65289;&#65306;&#21487;&#36873;&#30340;&#21333;&#20301;&#26377;&#22825;&#65288;DAYS&#65289;&#65292;&#23567;&#26102;&#65288;HOURS&#65289;&#65292;&#20998;&#38047;&#65288;MINUTES&#65289;&#65292;&#27627;&#31186;(MILLISECONDS)&#65292;&#24494;&#31186;(MICROSECONDS, &#21315;&#20998;&#20043;&#19968;&#27627;&#31186;)&#21644;&#27627;&#24494;&#31186;(NANOSECONDS, &#21315;&#20998;&#20043;&#19968;&#24494;&#31186;)&#12290;&#10;&#10;### &#21521;&#32447;&#31243;&#27744;&#25552;&#20132;&#20219;&#21153;&#10;- &#25105;&#20204;&#21487;&#20197;&#20351;&#29992;execute&#25552;&#20132;&#30340;&#20219;&#21153;&#65292;&#20294;&#26159;execute&#26041;&#27861;&#27809;&#26377;&#36820;&#22238;&#20540;&#65292;&#25152;&#20197;&#26080;&#27861;&#21028;&#26029;&#20219;&#21153;&#26159;&#21542;&#34987;&#32447;&#31243;&#27744;&#25191;&#34892;&#25104;&#21151;&#12290;&#36890;&#36807;&#20197;&#19979;&#20195;&#30721;&#21487;&#30693;execute&#26041;&#27861;&#36755;&#20837;&#30340;&#20219;&#21153;&#26159;&#19968;&#20010;Runnable&#31867;&#30340;&#23454;&#20363;&#12290;</span><br></pre></td></tr></table></figure></p>
<p>threadsPool.execute(new Runnable() {<br>            @Override<br>            public void run() {<br>                // TODO Auto-generated method stub<br>            }<br>        });<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">- 我们也可以使用submit 方法来提交任务，它会返回一个future,那么我们可以通过这个future来判断任务是否执行成功，通过future的<span class="keyword">get</span>方法来获取返回值，<span class="keyword">get</span>方法会阻塞住直到任务完成，而使用`<span class="keyword">get</span>(long <span class="keyword">timeout</span>, TimeUnit unit)`方法则会阻塞一段时间后立即返回，这时有可能任务没有执行完。</span><br></pre></td></tr></table></figure></p>
<p>Future<object> future = executor.submit(harReturnValuetask);<br>try {<br>     Object s = future.get();<br>} catch (InterruptedException e) {<br>    // 处理中断异常<br>} catch (ExecutionException e) {<br>    // 处理无法执行任务异常<br>} finally {<br>    // 关闭线程池<br>    executor.shutdown();<br>}<br><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="header">## 线程池的关闭</span></span><br><span class="line">我们可以通过调用线程池的shutdown或shutdownNow方法来关闭线程池，它们的原理是遍历线程池中的工作线程，然后逐个调用线程的interrupt方法来中断线程，所以无法响应中断的任务可能永远无法终止。但是它们存在一定的区别，<span class="code">`shutdownNow`</span>首先将线程池的状态设置成STOP，然后尝试停止所有的正在执行或暂停任务的线程，并返回等待执行任务的列表，而shutdown只是将线程池的状态设置成SHUTDOWN状态，然后中断所有没有正在执行任务的线程。</span><br><span class="line">只要调用了这两个关闭方法的其中一个，isShutdown方法就会返回true。当所有的任务都已关闭后,才表示线程池关闭成功，这时调用isTerminaed方法会返回true。至于我们应该调用哪一种方法来关闭线程池，应该由提交到线程池的任务特性决定，通常调用shutdown来关闭线程池，如果任务不一定要执行完，则可以调用shutdownNow。</span><br><span class="line"></span><br><span class="line"><span class="header">## 线程池的分析</span></span><br><span class="line"><span class="bullet">- </span>流程分析：线程池的主要工作流程如下图：</span><br><span class="line">![](/imgs/threadpool.jpg)</span><br><span class="line"></span><br><span class="line">从上图我们可以看出，当提交一个新任务到线程池时，线程池的处理流程如下：</span><br><span class="line"><span class="bullet">1. </span>首先线程池判断基本线程池是否已满？没满，创建一个工作线程来执行任务。满了，则进入下个流程。</span><br><span class="line"><span class="bullet">2. </span>其次线程池判断工作队列是否已满？没满，则将新提交的任务存储在工作队列里。满了，则进入下个流程。</span><br><span class="line"><span class="bullet">3. </span>最后线程池判断整个线程池是否已满？没满，则创建一个新的工作线程来执行任务，满了，则交给饱和策略来处理这个任务。</span><br><span class="line"></span><br><span class="line"><span class="bullet">- </span>源码分析。上面的流程分析让我们很直观的了解了线程池的工作原理，让我们再通过源代码来看看是如何实现的。线程池执行任务的方法如下：</span><br></pre></td></tr></table></figure></object></p>
<p>public void execute(Runnable command) {<br>    if (command == null)<br>       throw new NullPointerException();<br>    //如果线程数小于基本线程数，则创建线程并执行当前任务<br>    if (poolSize &gt;= corePoolSize || !addIfUnderCorePoolSize(command)) {<br>    //如线程数大于等于基本线程数或线程创建失败，则将当前任务放到工作队列中。<br>        if (runState == RUNNING &amp;&amp; workQueue.offer(command)) {<br>            if (runState != RUNNING || poolSize == 0)<br>                      ensureQueuedTaskHandled(command);<br>        }<br>    //如果线程池不处于运行中或任务无法放入队列，并且当前线程数量小于最大允许的线程数量，<br>则创建一个线程执行任务。<br>        else if (!addIfUnderMaximumPoolSize(command))<br>        //抛出RejectedExecutionException异常<br>            reject(command); // is shutdown or saturated<br>    }<br>}<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">工作线程。线程池创建线程时，会将线程封装成工作线程Worker，Worker在执行完任务后，还会无限循环获取工作队列里的任务来执行。我们可以从Worker的<span class="command">run</span>方法里看到这点：</span><br></pre></td></tr></table></figure></p>
<p>public void run() {<br>     try {<br>           Runnable task = firstTask;<br>           firstTask = null;<br>            while (task != null || (task = getTask()) != null) {<br>                    runTask(task);<br>                    task = null;<br>            }<br>      } finally {<br>             workerDone(this);<br>      }<br>}<br>```</p>
<h3 id="如何复用线程：">如何复用线程：</h3><p>从上面也可以看出来：<br>是通过无限循环获取工作队列里的任务来执行，并且在自己的run方法中直接调用Runnable.run()方法，这样并没有开启新的线程，而是处理了我们提交的线程里需要执行的任务，这样就达到了复用线程的目的了。</p>
<hr>
<h1 id="对象池：">对象池：</h1><h2 id="参考资料：">参考资料：</h2><p><a href="http://www.cnblogs.com/rubylouvre/p/3314775.html" target="_blank" rel="external">http://www.cnblogs.com/rubylouvre/p/3314775.html</a></p>
<h2 id="对象池的作用：">对象池的作用：</h2><p>限制一个类的对象的个数，（单例是限制了一个类只能有一个实例，对象池则是限制一个类实例的个数）</p>
<h2 id="实现方式：">实现方式：</h2><p>也是跟线程池差不多，在创建新对象的时候去判断是重新创建还是去池里取还是等待，从而达到复用对象的功能。这里重新创建和等待都很好理解，那么如何判断一个已经创建的对象是否可用呢？这就需要使用方在用完这个对象的时候去将这个对象设置为空闲，也就是相当于手动释放。理解了这个，对象池还是很好理解的。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/10/03/java线程池和对象池/" data-id="cifazseqh000ymcxpr33i9ueb" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-android插件化开发" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/29/android插件化开发/" class="article-date">
  <time datetime="2015-09-29T14:54:52.000Z" itemprop="datePublished">2015-09-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/29/android插件化开发/">android插件化开发</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>昨天一不小心搞出一个bug，而且还是崩溃，但是很快我就找到了原因，并且修复了bug提交了代码，一会儿qa马上热发了一版，这样我的崩溃问题就解决了，这也太快了！Android更新不是要先发应用市场，然后等待好几周的审核，然后有的用户还不肯更新吗？这里面到底用到了什么黑科技？于是我想知道android热发的原理，开始查android热发，没有找到什么有价值的东西，后来搜android 组件化开发，在知乎上找到一篇，回答很简单，但是有一个链接到他详细博客的地址<a href="http://www.trinea.cn/android/android-plugin/" target="_blank" rel="external">http://www.trinea.cn/android/android-plugin/</a> ，根据博客里面提供的信息，我了解了几个开源框架是如何实现热加载，或者说是热发的。</p>
<hr>
<h2 id="热发的过程：">热发的过程：</h2><ol>
<li>apk插件更新：通过差分（bsdiff），来更新需要更新的apk插件，最小化用户的下载量。</li>
<li>宿主程序动态加载更新之后的apk插件，完成热发。</li>
</ol>
<hr>
<h2 id="组件开发的概念：">组件开发的概念：</h2><blockquote>
<p>宿主程序通过ClassLoader去动态加载apk文件并将其放在自己的进程中执行。</p>
</blockquote>
<hr>
<h2 id="基本概念理解资料：">基本概念理解资料：</h2><ul>
<li>ClassLoader：<br><a href="http://www.trinea.cn/android/java-loader-common-class/" target="_blank" rel="external">http://www.trinea.cn/android/java-loader-common-class/</a><br><a href="http://android-developers.blogspot.hk/2011/07/custom-class-loading-in-dalvik.html" target="_blank" rel="external">http://android-developers.blogspot.hk/2011/07/custom-class-loading-in-dalvik.html</a>  （进阶）    </li>
<li>AndroidApk动态加载机制<br><a href="http://blog.csdn.net/singwhatiwanna/article/details/22597587" target="_blank" rel="external">http://blog.csdn.net/singwhatiwanna/article/details/22597587</a><br><a href="http://blog.csdn.net/singwhatiwanna/article/details/23387079" target="_blank" rel="external">http://blog.csdn.net/singwhatiwanna/article/details/23387079</a></li>
<li>开源项目dl的介绍：<br><a href="http://blog.csdn.net/singwhatiwanna/article/details/39937639" target="_blank" rel="external">http://blog.csdn.net/singwhatiwanna/article/details/39937639</a></li>
</ul>
<hr>
<h2 id="组件开发的好处：">组件开发的好处：</h2><ul>
<li>动态更新。不用频繁卸载安装apk程序。</li>
<li>可以多个项目同时开发，减少apk的大小，并且每个项目可以同时进行，减少编译时间等等。</li>
</ul>
<hr>
<h2 id="组件开发需要解决的问题：">组件开发需要解决的问题：</h2><p><a href="https://github.com/singwhatiwanna/dynamic-load-apk" target="_blank" rel="external">https://github.com/singwhatiwanna/dynamic-load-apk</a> 这个很好地解释了为什么会有这两个问题</p>
<ol>
<li><p>Activity生命周期的管理。</p>
<blockquote>
<p>apk被宿主程序调起以后，apk中的activity其实就是一个普通的对象，不具有activity的性质 ，因为系统启动activity是要做很多初始化工作的，而我们在应用层通过反射去启动activity是很难完成系统所做的初始化工作的，所以activity的大部分特性都无法使用包括activity的生命周期管理，这就需要我们自己去管理。</p>
</blockquote>
</li>
<li><p>资源的访问。</p>
<blockquote>
<p>我们知道，宿主程序调起未安装的apk，一个很大的问题就是资源如何访问，具体来说就是，凡是以R开头的资源都不能访问了，因为宿主程序中并没有apk中的资源，所以通过R来加载资源是行不通的，程序会报错：无法找到某某id所对应的资源。</p>
</blockquote>
</li>
</ol>
<hr>
<h2 id="几种动态加载开源项目的实现：">几种动态加载开源项目的实现：</h2><p>原文链接：<a href="http://www.trinea.cn/android/android-plugin/" target="_blank" rel="external">http://www.trinea.cn/android/android-plugin/</a>    </p>
<ol>
<li><p>DynamicLoadApk<br>GitHub：<a href="https://github.com/singwhatiwanna/dynamic-load-apk" target="_blank" rel="external">https://github.com/singwhatiwanna/dynamic-load-apk</a><br>这个项目实现了一部分的动态加载，原理是 DexClassLoader 加 Activity 代理，可以看看。即在容器中注册几个代理的 Activity，启动插件的 Activity 时实际启动的都是代理的 Activity，这样就解决了 Activity 必须注册的问题。<br>当然这个项目里也有不少问题没解决，有兴趣可以加入他们。  </p>
</li>
<li><p>AndroidDynamicLoader GitHub：<a href="https://github.com/mmin18/AndroidDynamicLoader" target="_blank" rel="external">https://github.com/mmin18/AndroidDynamicLoader</a><br>这是点评一个工程师介绍的方式，和上面不同的是：他不是用代理 Activity 的方式实现而是用 Fragment 以及 schema 的方式实现  </p>
</li>
<li><p>Android PluginManager GitHub：<a href="https://github.com/houkx/android-pluginmgr" target="_blank" rel="external">https://github.com/houkx/android-pluginmgr</a><br>这个项目的原理实际也是 DexClassLoader 加 Activity 代理，不同的是上面的 dynamic-load-apk 项目中，插件需要依赖框架的 lib，插件组件继承框架 lib 的 Base 组件。而这个框架通过字节码操作动态生成一个子类去继承插件组件解决插件必须依赖框架的问题，从而达到插件无需做任何改动(理论上)即可加载的效果。</p>
</li>
</ol>
<p>最近的：</p>
<ul>
<li><p>淘宝的 Atlas现在更名为ACDD<br><a href="https://github.com/bunnyblue/ACDD" target="_blank" rel="external">https://github.com/bunnyblue/ACDD</a><br><a href="https://github.com/bunnyblue/ACDDExtension" target="_blank" rel="external">https://github.com/bunnyblue/ACDDExtension</a></p>
</li>
<li><p>360 的 DroidPlugin<br><a href="https://github.com/Qihoo360/DroidPlugin" target="_blank" rel="external">https://github.com/Qihoo360/DroidPlugin</a></p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/09/29/android插件化开发/" data-id="cifazseqw0018mcxpsst8hqs1" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-RadioGroup-check-的坑" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/09/29/RadioGroup-check-的坑/" class="article-date">
  <time datetime="2015-09-29T03:40:43.000Z" itemprop="datePublished">2015-09-29</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/09/29/RadioGroup-check-的坑/">RadioGroup.check()的坑</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h3 id="问题描述：">问题描述：</h3><p>我使用RadioGroup.check()方法来初始化radioGroup，然后我在onCheckedChanged()里去根据选择的radioButton来发送网络请求，并且新建fragment。这时候我发现一个问题：这个radiobutton下的网络请求会发送两次，而且fragment也会创建两次，而且那个新建的fragment里还有很多的初始化过程和网络请求，所以会让用户一直处在等待的状态。</p>
<p>开始时候各种找原因，以为是我在哪里调用了太多次，还是共用layout文件有相同的id所以被别的地方的调用影响了？都不是，最后在stackoverflow上找到了答案：使用RadioGroup.check()会调用onCheckedChanged()方法三次，而我在onCheckedChanged()方法里判断了调用的是哪个id，然后发送请求创建fragmeng，所以只调用了两次。</p>
<h3 id="statckoverflow原文链接：">statckoverflow原文链接：</h3><p><a href="http://stackoverflow.com/questions/10263778/radiogroup-calls-oncheckchanged-three-times" target="_blank" rel="external">http://stackoverflow.com/questions/10263778/radiogroup-calls-oncheckchanged-three-times</a></p>
<p><img src="/imgs/radiogroupChecks.png" alt=""></p>
<h3 id="RadioGroup-check()源码如下：">RadioGroup.check()源码如下：</h3><p><a href="http://www.grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/RadioGroup.java#RadioGroup.check%28int%29" target="_blank" rel="external">http://www.grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/RadioGroup.java#RadioGroup.check%28int%29</a></p>
<p><img src="/imgs/radiogroup2.png" alt=""></p>
<h3 id="解决方法_：">解决方法 ：</h3><p>使用radioBotton.setChecked()方法来解决</p>
<p><img src="/imgs/radiogroup3.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/09/29/RadioGroup-check-的坑/" data-id="cifazseoq0000mcxpsamhxyrx" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-java-io" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/18/java-io/" class="article-date">
  <time datetime="2015-08-18T08:36:20.000Z" itemprop="datePublished">2015-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/java-io/">java io</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="java_io继承关系图：">java io继承关系图：</h2><p><img src="/imgs/java-io.png" alt=""></p>
<h2 id="inputStream_vs_Reader">inputStream vs Reader</h2><p><a href="http://stackoverflow.com/questions/4367539/what-is-the-difference-between-reader-and-inputstream" target="_blank" rel="external">http://stackoverflow.com/questions/4367539/what-is-the-difference-between-reader-and-inputstream</a><br>An InputStream is the raw method of getting information from a resource. It grabs the data byte by byte without performing any kind of translation. If you are reading image data, or any binary file, this is the stream to use.<br>A Reader is designed for character streams. If the information you are reading is all text, then the Reader will take care of the character decoding for you and give you unicode characters from the raw input stream. If you are reading any type of text, this is the stream to use.<br>You can wrap an InputStream and turn it into a Reader by using the InputStreamReader class.<br><code>Reader reader = new InputStreamReader(inputStream);</code></p>
<h2 id="solution:">solution:</h2><p>如果是读取字符类文件，可以使用Reader和Writer，不用担心编码问题。<br>如果是读取二进制文件，图片等等可以使用InputStream和OutputStream。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/08/18/java-io/" data-id="cifazseql0011mcxpn7ci1ewz" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/java/">java</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-some-useful-git-command" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/18/some-useful-git-command/" class="article-date">
  <time datetime="2015-08-18T08:35:10.000Z" itemprop="datePublished">2015-08-18</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/18/some-useful-git-command/">some useful git command</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="不提交一个文件（已经在仓库中，并且不想将远程仓库中的文件删除）在本地的改变">不提交一个文件（已经在仓库中，并且不想将远程仓库中的文件删除）在本地的改变</h2><h3 id="GIT:_ignoring_changes_in_tracked_files29/01/2009">GIT: ignoring changes in tracked files29/01/2009</h3><p>There may be times when you want to edit some variables in for example a database connection file, to run an application right from within your GIT repo. Of course you don’t wont those changes to be commited, so you add the file the .gitignore.<br>However adding tracked files to .gitignore won’t work because GIT will still track the changes and commit the file if you use the -a parameter.<br>Fortunately GIT has a very easy solution for this, just run the following command on the file or path you want to ignore the changes of:</p>
<blockquote>
<p><code>git update-index --assume-unchanged &lt;file&gt;</code>    </p>
</blockquote>
<p>If you wanna start tracking changes again run the following command:</p>
<blockquote>
<p><code>git update-index --no-assume-unchanged &lt;file&gt;</code></p>
</blockquote>
<h3 id="参考资料：">参考资料：</h3><p><a href="http://blog.pagebakers.nl/2009/01/29/git-ignoring-changes-in-tracked-files/" target="_blank" rel="external">http://blog.pagebakers.nl/2009/01/29/git-ignoring-changes-in-tracked-files/</a></p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/08/18/some-useful-git-command/" data-id="cifazseqd000wmcxpqpgoc3lj" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-AysncTask源码解析" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/08/06/AysncTask源码解析/" class="article-date">
  <time datetime="2015-08-06T08:03:13.000Z" itemprop="datePublished">2015-08-06</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/08/06/AysncTask源码解析/">AysncTask源码解析</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="AsyncTask的类图">AsyncTask的类图</h2><p><img src="/imgs/asynctask.png" alt=""></p>
<ul>
<li>其中，如果使用默认的Executor其实AsyncTask中的任务是一个一个执行的。<br>其中灰色的是接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">SerialExecutor</span> <span class="keyword">implements</span> <span class="title">Executor</span> </span>&#123;</span><br><span class="line">    <span class="keyword">final</span> ArrayDeque&lt;Runnable&gt; mTasks = <span class="keyword">new</span> ArrayDeque&lt;Runnable&gt;();</span><br><span class="line">    Runnable mActive;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">execute</span><span class="params">(<span class="keyword">final</span> Runnable r)</span> </span>&#123;</span><br><span class="line">        mTasks.offer(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    r.run();</span><br><span class="line">                &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">                    scheduleNext();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">if</span> (mActive == <span class="keyword">null</span>) &#123;</span><br><span class="line">            scheduleNext();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">protected</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">scheduleNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> ((mActive = mTasks.poll()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">            THREAD_POOL_EXECUTOR.execute(mActive);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从这段代码中可以看出来。<br>如果使用Thread_pool_executor那么就会使用线程池来执行你的task。<br>注释中也有：</p>
<p>Order of execution</p>
<p>When first introduced, AsyncTasks were executed serially on a single background<br>thread. Starting with {android.os.Build.VERSION_CODES#DONUT}, this was changed<br>to a pool of threads allowing multiple tasks to operate in parallel. Starting with<br>android.os.Build.VERSION_CODES#HONEYCOMB, tasks are executed on a single<br>thread to avoid common application errors caused by parallel execution</p>
<p> If you truly want parallel execution, you can invoke<br>executeOnExecutor(java.util.concurrent.Executor, Object[])} with<br>THREAD_POOL_EXECUTOR</p>
<ul>
<li><p>从类图可以看出来AsyncTask主要使用了组合的方式来使用代码。</p>
</li>
<li><p>理解代码的一个方式是画类图，然后找一个入口然后看下去，看他是如何调用的。</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/08/06/AysncTask源码解析/" data-id="cifazsepr000cmcxp3uql7ubs" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/sourcecode-analyze/">sourcecode analyze</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-idea上一些实用的快捷键" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/06/17/idea上一些实用的快捷键/" class="article-date">
  <time datetime="2015-06-17T08:37:43.000Z" itemprop="datePublished">2015-06-17</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/06/17/idea上一些实用的快捷键/">idea上一些实用的快捷键</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>这里列出的是我自认为使用比较多比较实用的一些，并不全，如果想看全的，可以推荐这一篇：<br><a href="http://www.cnblogs.com/tonycody/p/3257601.html" target="_blank" rel="external">http://www.cnblogs.com/tonycody/p/3257601.html</a></p>
<ul>
<li><p>ctrl + P<br>列出参数列表（使用比较多 ）</p>
</li>
<li><p>ctrl + shift + enter<br>当在括号里输入完最后一个参数时候他会直接光标跳到最后并且添加分号，不需要自己按向左键移动光标。（使用比较多 ）<br>ctrl + enter 向下插入一行，光标位置不变</p>
</li>
<li><p>shift + enter<br>向下插入一行。光标位置进入下一行（可以在一行的任何位置换行，而不必将光标移动到行尾，使用比较多）</p>
</li>
<li><p>ctrl+left/right<br>在单词间跳动光标，基本在所有的编辑器中都是适用 （使用比较多 ）</p>
</li>
<li><p>ctr+shitf+left/right<br>快速选中，基本在所有的编辑器中都是适用（shift选中，ctrl+left/right在单词中快速跳动，使用比较多 ）</p>
</li>
<li><p>Alt+left/right，切换代码视图（使用比较多 ）</p>
</li>
<li><p>Alt+Up/Down，在方法间快速移动定位（使用比较多 ）</p>
</li>
<li><p>F2 或 Shift+F2，高亮错误或警告快速定位（使用比较多）</p>
</li>
<li><p>Ctrl+Alt+T<br>可以把代码包在一个块内，例如：try/catch（使用比较多 ）</p>
</li>
<li><p>Ctrl+F，处于查找状态下按down向下查找，up向上查找（使用比较多）</p>
</li>
<li><p>Ctrl+F12，可以显示当前文件的结构（快速查找当前类中某个方法，使用比较多）</p>
</li>
<li><p>Ctrl+Shift+W，取消选择光标所在词（使用比较多）</p>
</li>
<li>Ctrl+[ OR ]，可以跑到大括号的开头与结尾</li>
<li><p>Ctrl+Shift +[ OR ]，选择大括号中的内容</p>
</li>
<li><p>alt + 1 同上（在工程目录和编辑页面间切换，使用比较多）</p>
</li>
<li><p>Ctrl+Alt+O，优化导入的类和包(去掉没有使用的import，使用比较多 )</p>
</li>
<li><p>Shift+F6，重构 - 重命名（使用比较多 ）</p>
</li>
<li><p>Ctrl+G，定位行</p>
</li>
<li><p>Ctrl+H，显示类结构图（类的继承层次）</p>
</li>
<li><p>Ctrl+U，转到父类</p>
</li>
<li><p>Ctrl+”+/-“，当前方法展开、折叠</p>
</li>
<li><p>Ctrl+Shift+”+/-“，全部展开、折叠</p>
</li>
<li><p>Ctrl+Shift+J，整合两行</p>
</li>
<li><p>ctrl + shift + space<br>当new 一个变量的时候，已经写了变量类型，打了等号之后按这个可以快速完成。</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/06/17/idea上一些实用的快捷键/" data-id="cifazseqp0013mcxp53iypmsa" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/tools/">tools</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-gralde 循环依赖的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/23/gralde 循环依赖的问题/" class="article-date">
  <time datetime="2015-05-23T02:42:24.000Z" itemprop="datePublished">2015-05-23</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/23/gralde 循环依赖的问题/">gralde 循环依赖的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>今天遇到一个问题，添加一个EventBus依赖包之后运行一直报：‘java.exe finished with non-zero exit value 2 ’</p>
<p>在statckoverflow上找到了问题的答案：</p>
<blockquote>
<p>First of all you should try to list your dependencies with gradle :MODULE:dependencies Check if there are libraries conflicts ( same library but different version ). In this case i supose you should exclude support library module from Facebook SDK.</p>
<pre><code><span class="keyword">compile</span> (<span class="string">'com.facebook.android:facebook-android-sdk:3.23.1'</span>){    
    <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">'com.google.android'</span>, module: <span class="string">'support-v4'</span>    
}
</code></pre></blockquote>
<h2 id="解决方法">解决方法</h2><p>在添加EventBus的依赖的地方添加如下代码：</p>
<blockquote>
<pre><code><span class="keyword">compile</span> (<span class="string">'de.greenrobot:eventbus:2.0.1'</span>){
    <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">'com.google.android'</span>, module: <span class="string">'support-v4'</span>
    <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">'com.google.android'</span>, module: <span class="string">'annotations'</span>
    <span class="keyword">exclude</span> <span class="keyword">group</span>: <span class="string">'com.google.android'</span>, module: <span class="string">'android-test'</span>
}
</code></pre></blockquote>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/05/23/gralde 循环依赖的问题/" data-id="cifazseq2000lmcxpdqibgwp8" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/gradle/">gradle</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-listView 闪动的问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/20/listView 闪动的问题/" class="article-date">
  <time datetime="2015-05-20T02:42:24.000Z" itemprop="datePublished">2015-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/20/listView 闪动的问题/">listView 闪动的问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>我仿做一个网易新闻客户端，因为每一行有不同的内容，所以需要使用getItemViewType来区分不同的行的类型</p>
<p>然而我的东西出现了一个很奇怪的问题：</p>
<blockquote>
<p>在滑动的时候会出现一行快速的闪动（快速变换不同的内容）</p>
</blockquote>
<p>分析问题原因：</p>
<blockquote>
<p>一开始以为我是因为在viewpager里嵌套viewpager惹的祸，<br>或者是使用开源的下拉刷新框架惹的祸，<br>或者是自己使用Viewholder的姿势不对，一开始主要是怀疑getView里面的东西用的不对。</p>
</blockquote>
<p>求证过程：</p>
<blockquote>
<p>我新写一个Activity并没用用到ViewPager，而且我也将原来的adapter的GetView方法重写，由于类型比较多，所以还将变量的名字改变了怕自己哪里写错了。但是依然还是闪动。</p>
</blockquote>
<p>真实的原因：</p>
<blockquote>
<p>然后我就发现我自己的Viewholder里面的组件也是static，因为Viewholder是要复用的，所以需要为static的，但是如果把里面的元素也写成是static的就会有问题。就像上面那样的闪动的问题。</p>
</blockquote>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/05/20/listView 闪动的问题/" data-id="cifazseq5000omcxpirn87sd5" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/android/">android</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-git的几个问题" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/05/05/git的几个问题/" class="article-date">
  <time datetime="2015-05-05T02:42:24.000Z" itemprop="datePublished">2015-05-05</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2015/05/05/git的几个问题/">关于git的几个问题</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="git_merge和git_rebase区别：">git merge和git rebase区别：</h2><p>这个文件写的很清楚<br><a href="http://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E8%A1%8D%E5%90%88" target="_blank" rel="external">http://git-scm.com/book/zh/v1/Git-%E5%88%86%E6%94%AF-%E5%88%86%E6%94%AF%E7%9A%84%E8%A1%8D%E5%90%88</a>     </p>
<h2 id="git_fetch和git_pull区别：">git fetch和git pull区别：</h2><p>其实git pull相当于：git fetch , git merge<br><a href="http://stackoverflow.com/questions/292357/what-are-the-differences-between-git-pull-and-git-fetch" target="_blank" rel="external">http://stackoverflow.com/questions/292357/what-are-the-differences-between-git-pull-and-git-fetch</a>    </p>
<h2 id="到底是应该使用git_pull_还是_git_pull_—rebase_?">到底是应该使用git pull 还是 git pull —rebase ?</h2><p>我个人赞同使用git pull —rebase,因为如果多个人开发并且经常pull的话，就会出现很多：<code>Merge branch &#39;aaa&#39; of git.xxx.xxx/xxx/xxx into aaa</code>这样的commit。<br>就像这里的讨论：<a href="https://ruby-china.org/topics/112" target="_blank" rel="external">https://ruby-china.org/topics/112</a></p>
<h2 id="我们使用的工作流【集中式工作流】：">我们使用的工作流【集中式工作流】：</h2><p><a href="http://git-scm.com/book/zh/v1/%E5%88%86%E5%B8%83%E5%BC%8F-Git-%E5%88%86%E5%B8%83%E5%BC%8F%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B" target="_blank" rel="external">http://git-scm.com/book/zh/v1/%E5%88%86%E5%B8%83%E5%BC%8F-Git-%E5%88%86%E5%B8%83%E5%BC%8F%E5%B7%A5%E4%BD%9C%E6%B5%81%E7%A8%8B</a><br>通常，集中式工作流程使用的都是单点协作模型。一个存放代码仓库的中心服务器，可以接受所有开发者提交的代码。所有的开发者都是普通的节点，作为中心集线器的消费者，平时的工作就是和中心仓库同步数据（见图 5-1）。  </p>
<p><img src="/imgs/workflow.png" alt="workflow.png"></p>
<p>如果两个开发者从中心仓库克隆代码下来，同时作了一些修订，那么只有第一个开发者可以顺利地把数据推送到共享服务器。第二个开发者在提交他的修订之前，必须先下载合并服务器上的数据，解决冲突之后才能推送数据到共享服务器上。在 Git 中这么用也决无问题，这就好比是在用 Subversion（或其他 CVCS）一样，可以很好地工作。<br>如果你的团队不是很大，或者大家都已经习惯了使用集中式工作流程，完全可以采用这种简单的模式。只需要配置好一台中心服务器，并给每个人推送数据的权限，就可以开展工作了。<strong>但如果提交代码时有冲突， Git 根本就不会让用户覆盖他人代码，它直接驳回第二个人的提交操作。这就等于告诉提交者，你所作的修订无法通过快进（fast-forward）来合并，你必须先拉取最新数据下来，手工解决冲突合并后，才能继续推送新的提交</strong>。 绝大多数人都熟悉和了解这种模式的工作方式，所以使用也非常广泛。</p>

      
    </div>
    <footer class="article-footer">
      
        <a data-url="http://yoursite.com/2015/05/05/git的几个问题/" data-id="cifazsept000fmcxp8wyrcntl" class="article-share-link">分享到</a>
      

      

      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
    <nav id="page-nav">
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Next &raquo;</a>
    </nav>
  
</section>
      
      <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/android/">android</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/design-pattern/">design pattern</a><span class="tag-list-count">4</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gradle/">gradle</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/sourcecode-analyze/">sourcecode analyze</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/test/">test</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/thoughts/">thoughts</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/tools/">tools</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/android/" style="font-size: 20px;">android</a> <a href="/tags/design-pattern/" style="font-size: 17.5px;">design pattern</a> <a href="/tags/git/" style="font-size: 12.5px;">git</a> <a href="/tags/gradle/" style="font-size: 10px;">gradle</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/sourcecode-analyze/" style="font-size: 10px;">sourcecode analyze</a> <a href="/tags/test/" style="font-size: 12.5px;">test</a> <a href="/tags/thoughts/" style="font-size: 10px;">thoughts</a> <a href="/tags/tools/" style="font-size: 10px;">tools</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/10/">十月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/09/">九月 2015</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">八月 2015</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/06/">六月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">五月 2015</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">四月 2015</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">九月 2014</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">三月 2014</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">近期文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2015/10/03/java线程池和对象池/">java线程池和对象池</a>
          </li>
        
          <li>
            <a href="/2015/09/29/android插件化开发/">android插件化开发</a>
          </li>
        
          <li>
            <a href="/2015/09/29/RadioGroup-check-的坑/">RadioGroup.check()的坑</a>
          </li>
        
          <li>
            <a href="/2015/08/18/java-io/">java io</a>
          </li>
        
          <li>
            <a href="/2015/08/18/some-useful-git-command/">some useful git command</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">友情链接</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="http://xiguabaobao.com" target="_blank">主题作者</a>
          </li>
        
          <li>
            <a href="http://reqianduan.com" target="_blank">热前端</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
      
    </div>
    <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2015 ironman<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
      .
      Theme by <a href="https://github.com/xiangming/landscape-plus" target="_blank">Landscape-plus</a>
    </div>
  </div>
</footer>
  </div>
  <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
  <!-- totop start -->
<div id="totop">
<a title="返回顶部"><img src="/img/scrollup.png"/></a>
</div>

<!-- totop end -->


<!-- 百度分享 start -->

<!-- 百度分享 end -->

<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>




<script src="/js/script.js" type="text/javascript"></script>

</div>
</body>
</html>
